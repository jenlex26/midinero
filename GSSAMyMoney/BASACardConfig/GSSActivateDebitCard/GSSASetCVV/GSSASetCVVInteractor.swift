//
//  GSSASetCVVInteractor.swift
//  GSSAMyMoney
//
//  Created Desarrollo on 29/07/21.
//  Copyright © 2021 ___ORGANIZATIONNAME___. All rights reserved.
//
//  Template generated by Juanpe Catalán @JuanpeCMiOS
//

import UIKit
import GSSAServiceCoordinator
import GSSASecurityManager
import GSSASessionInfo
import GSSAFunctionalUtilities

class GSSASetCVVInteractor: GSSAURLSessionTaskCoordinatorBridge, GSSASetCVVInteractorProtocol {
    weak var presenter: GSSASetCVVPresenterProtocol?
    
    func trySetCardCVV(body: SetCVVBody, CardSearchResponse: @escaping (CreditCardActivationResponse?) -> ()){
        
        if GLOBAL_ENVIROMENT == .develop{
            self.urlPath = "https://apigateway.superappbaz.com/"
            self.strPathEndpoint = "integracion/superapp/dinero/captacion/gestion-tarjetas-fisicas/v1/tarjetas"
        }else{
            self.strPathEndpoint = "/superapp/dinero/captacion/gestion-tarjetas-fisicas/v1/tarjetas"
        }
       
        sendRequest(strUrl: strPathEndpoint, method: .POST, objBody: body, environment: GLOBAL_ENVIROMENT) { (objRes: CreditCardActivationResponse?, error) in
            debugPrint(objRes as Any)
            if error.code == 0 {
                print("correcto")
                debugPrint(objRes as Any)
                CardSearchResponse(objRes)
            } else {
                debugPrint(error)
                CardSearchResponse(nil)
            }
        }
    }
}
